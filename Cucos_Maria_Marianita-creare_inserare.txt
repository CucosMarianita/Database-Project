CREATE TABLE FABRICA (
    Id_fabrica INT IDENTITY(1,1) CONSTRAINT PKEY_FABRICA PRIMARY KEY,
    Locatie varchar(200) CONSTRAINT LOCATIE_FABRICA NOT NULL,
    Nume varchar(100) CONSTRAINT NUME_FABRICA NOT NULL);

INSERT INTO FABRICA
VALUES ('Bucuresti','Mob Expert');
INSERT INTO FABRICA
VALUES ('Ploiesti','Mob Expert');
INSERT INTO FABRICA
VALUES ('Bucuresti','The home');
INSERT INTO FABRICA
VALUES ('Constanta','Your furniture');
INSERT INTO FABRICA
VALUES ('Brasov','Mob Design');

select * from FABRICA


CREATE TABLE HALA(
	Id_hala INT IDENTITY(1,1) CONSTRAINT PKEY_HALA PRIMARY KEY,
	Suprafata FLOAT CONSTRAINT SUPRAFATA_HALA CHECK (Suprafata>=150 AND Suprafata<=1000) NOT NULL, 
	Nume VARCHAR(100) CONSTRAINT NUME_HALA NOT NULL, 
	Id_fabrica INT, 
	CONSTRAINT FK_HALA FOREIGN KEY(Id_fabrica) REFERENCES FABRICA(Id_fabrica) );

INSERT INTO HALA
VALUES (200,'corp A',1 );
INSERT INTO HALA
VALUES (500,'corp AB',1 );
INSERT INTO HALA
VALUES (250,'corp B',2 );
INSERT INTO HALA
VALUES (900,'corp 1',3 );
INSERT INTO HALA
VALUES (300,'corp 2',3 );
INSERT INTO HALA
VALUES (500,'corp A',4 );
INSERT INTO HALA
VALUES (680,'corp B',5 );

SELECT * FROM HALA



CREATE TABLE DEPARTAMENT(
	Id_departament INT IDENTITY(1,1) CONSTRAINT PKEY_DEPARTAMENT PRIMARY KEY,
	Nume VARCHAR(100) CONSTRAINT NUME_DEPARTAMENT NOT NULL, 
	Id_hala INT, 
	CONSTRAINT FK_DEPARTAMENT FOREIGN KEY(Id_hala) REFERENCES HALA(Id_hala) );

INSERT INTO DEPARTAMENT
VALUES ('impachetare', 2);
INSERT INTO DEPARTAMENT
VALUES ('modelare', 2);
INSERT INTO DEPARTAMENT
VALUES ('ansamblare', 3);
INSERT INTO DEPARTAMENT
VALUES ('design', 4);
INSERT INTO DEPARTAMENT
VALUES ('finisare', 3);
INSERT INTO DEPARTAMENT
VALUES ('livrare', 6);
INSERT INTO DEPARTAMENT
VALUES ('taiere', 7);
INSERT INTO DEPARTAMENT
VALUES ('design', 7);


drop table DEPARTAMENT
SELECT * FROM DEPARTAMENT


CREATE TABLE ANGAJAT(
	Id_angajat INT CONSTRAINT PKEY_ANGAJAT PRIMARY KEY,
	Nume VARCHAR(50) CONSTRAINT NUME_ANGAJAT NOT NULL, 
	Prenume VARCHAR(100) CONSTRAINT PRENUME_ANGAJAT NOT NULL,
	CNP varchar(20) UNIQUE CONSTRAINT CNP_ANGAJAT CHECK (LEN(CNP)=13) NOT NULL,
	Salariu FLOAT CONSTRAINT SALARIU_ANGAJAT DEFAULT 0,
	Data_angajare DATE CONSTRAINT DATA_ANGAJARE_ANGAJAT NOT NULL,
	Telefon varchar(20) CONSTRAINT TELEFON_ANGAJAT NOT NULL,
	Sex VARCHAR(10) CONSTRAINT SEX_ANGAJAT CHECK (Sex in ('F','M')) NOT NULL, 
	Mail VARCHAR(100),
	Id_departament INT, 
	CONSTRAINT FK_ANGAJAT FOREIGN KEY(Id_departament) REFERENCES DEPARTAMENT(Id_departament) );


INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Popa','Alex', 1760523567832, 3000, '20100716' , '0763247942', 'M', 'popaalex@yahoo.com',2);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Mincu','Elena', 2950319789954 , 4500, '20151018', '0764674378', 'F', 'm_elena@gmail.com',4);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Lazar','Claudiu', 5000219479822, 4000, '20210901', '0762748895', 'M', 'claudiu_lazar@gmail.com',4);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Zapachi','Mihai', 1850416452896, 3200, '20080305', '0761487529', 'M', 'zapachi@gmail.com',6);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Constantin','Andrei', 1860421678942, 3000, '20190712', '0764267481', 'M', null,5);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Alecu','Raluca', 2890627898429, 2800, '20201108', '0762485571', 'F', 'ralu.alecu@yahoo.com',5);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Popa','Marian', 1990514589617, 5000, '20220601', '0762458697', 'M', null,8);
INSERT INTO ANGAJAT 
VALUES (next value for seq_angajat ,'Panaite','Valentin', 1850419526379, 4200, '20210916', '0762154786', 'M', null,5);

create sequence seq_angajat
increment by 5
start with 20
maxvalue 1000
no cycle;

DELETE FROM angajat WHERE Id_angajat=8;
SELECT * FROM DEPARTAMENT
SELECT * FROM ANGAJAT
drop table angajat




CREATE TABLE FURNIZOR(
	Id_furnizor INT IDENTITY(1,1) CONSTRAINT PKEY_FURNIZOR PRIMARY KEY,
	Nume VARCHAR(100) CONSTRAINT NUME_FURNIZOR NOT NULL, 
	Telefon varchar(20) CONSTRAINT TELEFON_FURNIZOR NOT NULL,
	Mail VARCHAR(100) UNIQUE CONSTRAINT MAIL_FURNIZOR NOT NULL CHECK (Mail like '%_@__%.__%'));


INSERT INTO FURNIZOR 
VALUES ('Alex&Co','0745267759','alex&coSRL@gmail.com');
INSERT INTO FURNIZOR 
VALUES ('Androstal','0761254895','androstal@gmail.com');
INSERT INTO FURNIZOR 
VALUES ('Deccons','0748264818','Deccons@gmail.com');
INSERT INTO FURNIZOR 
VALUES ('Inoveco','0746958725','InovecoSRL@gmail.com');
INSERT INTO FURNIZOR 
VALUES ('CRH Romania','0764259583','CRH_Romania@yahoo.com');
INSERT INTO FURNIZOR 
VALUES ('Deppo','0761459027','deppoSRL@gmail.com');

SELECT * FROM FURNIZOR


CREATE TABLE MATERIAL(
	Id_material INT IDENTITY(1,1) CONSTRAINT PKEY_MATERIAL PRIMARY KEY,
	Nume VARCHAR(100) CONSTRAINT NUME_MATERIAL NOT NULL, 
	Cantitate INT CONSTRAINT CANTITATE_MATERIAL DEFAULT 0,
	Categorie VARCHAR(100) CONSTRAINT CATEGORIE_MATERIAL NOT NULL, 
	Id_fabrica INT, 
	CONSTRAINT FK1_MATERIAL FOREIGN KEY(Id_fabrica) REFERENCES FABRICA(Id_fabrica),
	Id_furnizor INT, 
	CONSTRAINT FK2_MATERIAL FOREIGN KEY(Id_furnizor) REFERENCES FURNIZOR(Id_furnizor) );


INSERT INTO MATERIAL
VALUES ('lemn stejar',100,'lemn', 1, 3);
INSERT INTO MATERIAL
VALUES ('lemn mahon',120,'lemn', 1, 6);
INSERT INTO MATERIAL
VALUES ('lemn cires',105,'lemn', 1, 3);
INSERT INTO MATERIAL
VALUES ('sticla cenusie',8,'sticla', 5, 3);
INSERT INTO MATERIAL
VALUES ('sticla neagra',50,'sticla', 1, 3);
INSERT INTO MATERIAL
VALUES ('surub M5',5,'surub', 4, 5);
INSERT INTO MATERIAL
VALUES ('maner auriu',34,'accesorii', 4, 2);
INSERT INTO MATERIAL
VALUES ('surub M10',100,'surub', 2, 4);
INSERT INTO MATERIAL
VALUES ('surub M30',9,'surub', 2, 4);

DELETE FROM material WHERE Id_material=4;
SELECT * FROM FURNIZOR
SELECT * FROM FABRICA
SELECT * FROM MATERIAL


CREATE TABLE PRODUS(
	Id_produs INT IDENTITY(1,1) CONSTRAINT PKEY_PRODUS PRIMARY KEY,
	Categorie VARCHAR(100) CONSTRAINT CATEGORIE_PRODUS NOT NULL,
	Nume VARCHAR(100) CONSTRAINT NUME_PRODUS NOT NULL,
	Pret INT CONSTRAINT PRET_PRODUS NOT NULL,
	Dimensiune VARCHAR(100) CONSTRAINT DIMENSIUNE_PRODUS NOT NULL);

INSERT INTO PRODUS
VALUES ('dormitor', 'sifonier 3 usi', 2500, '250x50x200');
INSERT INTO PRODUS
VALUES ('dormitor', 'sifonier 2 usi', 1900, '120x50x200');
INSERT INTO PRODUS
VALUES ('dormitor', 'pat mahon', 2000, '200x150x40');
INSERT INTO PRODUS
VALUES ('baie', 'dulap cu sertare', 900, '60x40x180');
INSERT INTO PRODUS
VALUES ('sufragerie', 'masa cafea', 500, '100x60x50');
INSERT INTO PRODUS
VALUES ('sufragerie', 'biblioteca', 4500, '270x40x200');
INSERT INTO PRODUS
VALUES ('bucatarie', 'masa stejar', 1200, '200x60x80');

SELECT * FROM PRODUS
	

CREATE TABLE CLIENT(
	Id_client INT IDENTITY(1,1) CONSTRAINT PKEY_CLIENT PRIMARY KEY,
	Nume VARCHAR(100) CONSTRAINT NUME_CLIENT NOT NULL, 
	Prenume VARCHAR(100) CONSTRAINT PRENUME_CLIENT NOT NULL,
	Telefon VARCHAR(20) CONSTRAINT TELEFON_CLIENT NOT NULL,
	Mail VARCHAR(100) UNIQUE CONSTRAINT MAIL_CLIENT NOT NULL CHECK (Mail like '%_@__%.__%'));


INSERT INTO CLIENT
VALUES ('Diaconu','Madalin', '0763479586','m.diaconu78@gmail.com');
INSERT INTO CLIENT
VALUES ('Florea','Andreea', '0761485722','andreea-fl@gmail.com');
INSERT INTO CLIENT
VALUES ('Andrei','Costin', '0762175984','costi@gmail.com');
INSERT INTO CLIENT
VALUES ('Balan','Roxana', '0764598746','RoxBalan@gmail.com');
INSERT INTO CLIENT
VALUES ('Nita','Claudia', '0761457957','nita_claudia@gmail.com');
INSERT INTO CLIENT
VALUES ('Popa','Radu', '0763473695','poparadu@gmail.com');

SELECT * FROM CLIENT



CREATE TABLE FACTURA(
	Id_factura INT IDENTITY(1,1) CONSTRAINT PKEY_FACTURA PRIMARY KEY,
	Total_plata FLOAT CONSTRAINT TOTAL_PLATA_FACTURA NOT NULL,
	Data DATE CONSTRAINT DATA_FACTURA NOT NULL,
	Id_client INT, 
	CONSTRAINT FK_FACTURA FOREIGN KEY(Id_client) REFERENCES CLIENT(Id_client) );

INSERT INTO FACTURA
VALUES (4500,'20220311',1);
INSERT INTO FACTURA
VALUES (7500,'20220528',2);
INSERT INTO FACTURA
VALUES (2500,'20220122',2);
INSERT INTO FACTURA
VALUES (4000,'20211007',3);
INSERT INTO FACTURA
VALUES (900,'20201203',4);
INSERT INTO FACTURA
VALUES (720,'20220610',5);
INSERT INTO FACTURA
VALUES (11000,'20210713',6);

SELECT * FROM FACTURA
select * from client
	

CREATE TABLE COMANDA_PRODUS(
	Id_comanda INT IDENTITY(1,1) CONSTRAINT PKEY_COMANDA_PRODUS PRIMARY KEY,
	Data DATE CONSTRAINT DATA_COMANDA_PRODUS NOT NULL,
	Deadline DATE CONSTRAINT DEADLINE_COMANDA_PRODUS NOT NULL,
	Id_fabrica INT, 
	CONSTRAINT FK1_COMANDA_PRODUS FOREIGN KEY(Id_fabrica) REFERENCES FABRICA(Id_fabrica),
	Id_client INT, 
	CONSTRAINT FK2_COMANDA_PRODUS FOREIGN KEY(Id_client) REFERENCES CLIENT(Id_client) );

INSERT INTO COMANDA_PRODUS
VALUES('20220415','20220615', 1, 3);
INSERT INTO COMANDA_PRODUS
VALUES('20210810','20211101', 1, 2);
INSERT INTO COMANDA_PRODUS
VALUES('20200415','20200515', 1, 5);
INSERT INTO COMANDA_PRODUS
VALUES('20220127','20220301', 3, 6);
INSERT INTO COMANDA_PRODUS
VALUES('20211117','20220128', 3, 1);
INSERT INTO COMANDA_PRODUS
VALUES('20210801','20210915', 1, 3);
INSERT INTO COMANDA_PRODUS
VALUES('20210508','20210805', 3, 4);
INSERT INTO COMANDA_PRODUS
VALUES('20210219','20210401', 4, 3);
INSERT INTO COMANDA_PRODUS
VALUES('20220108','20220301', 2, 2);
INSERT INTO COMANDA_PRODUS
VALUES('20210510','20210707', 2, 5);
INSERT INTO COMANDA_PRODUS
VALUES('20220504','20220601', 4, 3);
INSERT INTO COMANDA_PRODUS
VALUES('20210725','20210815', 5, 1);

SELECT * FROM COMANDA_PRODUS
select * from FABRICA
select * from client


CREATE TABLE COMANDA_STANDARD(
	Id_comanda INT, 
	CONSTRAINT FK_COMANDA_STANDARD FOREIGN KEY(Id_comanda) REFERENCES COMANDA_PRODUS(Id_comanda),
	Nume_produs VARCHAR(100) CONSTRAINT NUME_PROD_COM_ST NOT NULL);

INSERT INTO COMANDA_STANDARD
VALUES(2, 'pat mahon');
INSERT INTO COMANDA_STANDARD
VALUES(3, 'sifonier 3 usi');
INSERT INTO COMANDA_STANDARD
VALUES(6, 'dulap baie');
INSERT INTO COMANDA_STANDARD
VALUES(7, 'biblioteca');
INSERT INTO COMANDA_STANDARD
VALUES(10, 'masa cafea');

SELECT * FROM COMANDA_STANDARD


CREATE TABLE COMANDA_PERSONALIZATA(
	Id_comanda INT, 
	CONSTRAINT FK_COMANDA_PERSONALIZATA FOREIGN KEY(Id_comanda) REFERENCES COMANDA_PRODUS(Id_comanda),
	Admisa VARCHAR(20) CONSTRAINT ADMIS_COMANDA CHECK (Admisa in ('F','T')) NOT NULL,
	Link VARCHAR(300) CONSTRAINT LINK_COMANDA NOT NULL);

INSERT INTO COMANDA_PERSONALIZATA
VALUES(1, 'T', 'https://drive.google.com/file/d/13U8KQCObP8ke');
INSERT INTO COMANDA_PERSONALIZATA
VALUES(4, 'T', 'https://drive.google.com/file/d/1er54g6g4');
INSERT INTO COMANDA_PERSONALIZATA
VALUES(8, 'F', 'https://drive.google.com/file/d/5jydj4srj5j4sr');
INSERT INTO COMANDA_PERSONALIZATA
VALUES(9, 'T', 'https://drive.google.com/file/d/tj4gejnzbs8md');
INSERT INTO COMANDA_PERSONALIZATA
VALUES(5, 'F', 'https://drive.google.com/file/d/45hj1j54nb5fs2');
INSERT INTO COMANDA_PERSONALIZATA
VALUES(11, 'T', 'https://drive.google.com/file/d/5e46b44b4v');
INSERT INTO COMANDA_PERSONALIZATA
VALUES(12, 'T', 'https://drive.google.com/file/d/n4asdfghjkecu');

SELECT * FROM COMANDA_PERSONALIZATA


CREATE TABLE PRODUS_COMANDAT(
	Id_produs_comandat INT IDENTITY(1,1) CONSTRAINT PKEY_PRODUS_COMANDAT PRIMARY KEY,
	Pret FLOAT CONSTRAINT PRET_PRODUS_COMANDAT NOT NULL,
	Id_produs INT, 
	CONSTRAINT FK1_PRODUS_COMANDAT FOREIGN KEY(Id_produs) REFERENCES PRODUS(Id_produs),
	Id_comanda INT, 
	CONSTRAINT FK2_PRODUS_COMANDAT FOREIGN KEY(Id_comanda) REFERENCES COMANDA_PRODUS(Id_comanda),
	Id_factura INT, 
	CONSTRAINT FK3_PRODUS_COMANDAT FOREIGN KEY(Id_factura) REFERENCES FACTURA(Id_factura));

INSERT INTO PRODUS_COMANDAT
VALUES(2000, 3, 2, 1);
INSERT INTO PRODUS_COMANDAT
VALUES(2500, 1, 3, 1);
INSERT INTO PRODUS_COMANDAT
VALUES(900, 4, 6, 5);
INSERT INTO PRODUS_COMANDAT
VALUES(4500, 6, 7, 7);
INSERT INTO PRODUS_COMANDAT
VALUES(500, 5, 10, 7);
INSERT INTO PRODUS_COMANDAT
VALUES(6000, 3, 1, 7);
INSERT INTO PRODUS_COMANDAT
VALUES(720, 7, 4, 6);
INSERT INTO PRODUS_COMANDAT
VALUES(2500, 3, 9, 3);
INSERT INTO PRODUS_COMANDAT
VALUES(4000, 2, 11, 4);
INSERT INTO PRODUS_COMANDAT
VALUES(7500, 6, 12, 2);

SELECT * FROM PRODUS_COMANDAT
SELECT * FROM produs
SELECT * FROM comanda_standard
SELECT * FROM factura

CREATE TABLE CURIER(
	Id_curier INT IDENTITY(1,1) CONSTRAINT PKEY_CURIER PRIMARY KEY,
	Nume VARCHAR(100) CONSTRAINT NUME_CURIER NOT NULL, 
	Prenume VARCHAR(100) CONSTRAINT PRENUME_CURIER NOT NULL,
	CNP VARCHAR(20) UNIQUE CONSTRAINT CNP_CURIER CHECK (LEN(CNP)=13) NOT NULL,
	Telefon VARCHAR(20) CONSTRAINT TELEFON_CURIER NOT NULL,
	Mail VARCHAR(100));

INSERT INTO CURIER
VALUES('Popescu','Mihnea', '1780514589642','0764589316',null);
INSERT INTO CURIER
VALUES('Marinescu','Razvan', '1840618562849','0746259873','razvan.marinescu@yahoo.com');
INSERT INTO CURIER
VALUES('Birau','Alex', '1891008457892','0743298562','abirau@gmail.com');
INSERT INTO CURIER
VALUES('Popescu','Robert', '1901118596248','0764458961','popescu_robert@gmail.com');
INSERT INTO CURIER
VALUES('Mincu','Catalin', '1850128125968','0741259862','mincu.cata@gmail.com');

SELECT * FROM CURIER



CREATE TABLE LIVREAZA(
	Data DATE CONSTRAINT DATA_LIVRARE NOT NULL,
	Ora_livrare TIME, 
	Id_client INT, 
	CONSTRAINT FK1_LIVRARE FOREIGN KEY(Id_client) REFERENCES CLIENT(Id_client),
	Id_curier INT, 
	CONSTRAINT FK2_LIVRARE FOREIGN KEY(Id_curier) REFERENCES CURIER(Id_curier),
	Id_produs_comandat INT, 
	CONSTRAINT FK3_LIVRARE FOREIGN KEY(Id_produs_comandat) REFERENCES PRODUS_COMANDAT (Id_produs_comandat) );

INSERT INTO LIVREAZA
VALUES('20220415','12:00',1,3,1);
INSERT INTO LIVREAZA
VALUES('20220415','12:00',1,3,2);
INSERT INTO LIVREAZA
VALUES('20211027','11:00', 2, 1, 10);
INSERT INTO LIVREAZA
VALUES('20211101','10:00', 3, 5, 9);
INSERT INTO LIVREAZA
VALUES('20220309','14:00', 2, 4, 8);
INSERT INTO LIVREAZA
VALUES('20211214','09:00', 4, 1, 3);
INSERT INTO LIVREAZA
VALUES('20220519','12:00', 5, 2, 7);
INSERT INTO LIVREAZA
VALUES('20210921','15:00', 6, 2, 5);
INSERT INTO LIVREAZA
VALUES('20210921','15:00', 6, 5, 4);
INSERT INTO LIVREAZA
VALUES('20210921','15:00', 6, 3, 6);

SELECT * FROM LIVREAZA





select * from FABRICA
SELECT * FROM HALA
SELECT * FROM DEPARTAMENT
SELECT * FROM ANGAJAT
SELECT * FROM MATERIAL
SELECT * FROM FURNIZOR
SELECT * FROM PRODUS
SELECT * FROM CLIENT
SELECT * FROM FACTURA
SELECT * FROM CURIER
SELECT * FROM LIVREAZA
SELECT * FROM COMANDA_PRODUS
select * from comanda_standard
select * from comanda_personalizata
SELECT * FROM PRODUS_COMANDAT






drop table FABRICA
drop table HALA
drop table DEPARTAMENT
drop table ANGAJAT
drop table MATERIAL
drop table FURNIZOR
drop table PRODUS_COMANDAT
drop table PRODUS
drop table CLIENT
drop table FACTURA
drop table CURIER
drop table LIVREAZA
drop table COMANDA_PRODUS


